{"version":3,"sources":["webpack:///./js/api.js","webpack:///./js/push.js"],"names":["query","pageNumber","buttomPosition","baseUrl","key","fetchImages","requestParam","this","fetch","then","responce","json","refs","searchForm","document","querySelector","articleList","loadMore","e","apiService","getBoundingClientRect","bottom","data","markup","getTamplite","hits","insertAdjacentHTML","reduce","acc","foto","webformatURL","largeImageURL","likes","views","comments","downloads","addEventListener","preventDefault","currentTarget","elements","value","innerHTML","window","scrollTo","top","left","behavior","documentElement","clientHeight"],"mappings":"2JAAe,GACXA,MAAO,GACPC,WAAY,EACZC,eAAe,EACfC,QAAQ,2BACVC,IAAK,qCACJC,YANY,WAOZ,IAAMC,EAAe,8CAA8CC,KAAKP,MAAtD,SAAoEO,KAAKN,WAAzE,oBAAuGM,KAAKH,IAC7H,OAAOI,MAAMD,KAAKJ,QAAUG,GAAcG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,YCPlEC,EAAO,CACXC,WAAYC,SAASC,cAAc,eACnCC,YAAaF,SAASC,cAAc,YACpCE,SAAUH,SAASC,cAAc,oCAQnC,SAASE,EAAUC,GACfC,EAAWjB,eAAeU,EAAKI,YAAYI,wBAAwBC,OACnEF,EAAWlB,YAAY,EACvBkB,EAAWd,cAAcI,MAAK,SAAAa,GAC1B,IAAMC,EAASC,EAAYF,EAAKG,MAChCb,EAAKI,YAAYU,mBAAmB,YAAaH,MAyBzD,SAASC,EAAYF,GACnB,OAAOA,EAAKK,QAAO,SAACC,EAAKC,GACvB,OAAQD,EAAO,qCACRC,EAAKC,aADD,wBACqCD,EAAKE,cAD1C,uGAKTF,EAAKG,MALI,yFASTH,EAAKI,MATI,sFAaTJ,EAAKK,SAbI,4FAiBVL,EAAKM,UAjBK,4BAqBV,IAzDLvB,EAAKC,WAAWuB,iBAAiB,UAyBjC,SAAiClB,GAC/BA,EAAEmB,iBACFlB,EAAWlB,WAAW,EACtBkB,EAAWnB,MAAQkB,EAAEoB,cAAcC,SAASvC,MAAMwC,MAClDrB,EAAWd,cAAcI,MAAK,SAAAa,GAC5B,IAAMC,EAASC,EAAYF,EAAKG,MAChCb,EAAKI,YAAYyB,UAAYlB,QA9BjCX,EAAKK,SAASmB,iBAAiB,QAAQnB,GACvCL,EAAKK,SAASmB,iBAAiB,SAgB/B,WACIM,OAAOC,SAAS,CACZC,IAAIzB,EAAWjB,eACf2C,KAAM,EACNC,SAAU,cAnBlBJ,OAAON,iBAAiB,UAUxB,WACA,KAAItB,SAASiC,gBAAgB3B,wBAAwBC,OAASP,SAASiC,gBAAgBC,aAAa,IAE9F,OADF/B,O","file":"main.2d8fa78ba02212d096be.js","sourcesContent":["export default {\r\n    query: '',\r\n    pageNumber: 1,\r\n    buttomPosition:0,\r\n    baseUrl:'https://pixabay.com/api/',\r\n  key: '16056306-b774bb8eb3846f9eca7b7b057',\r\n   fetchImages() {\r\n   const requestParam = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.pageNumber}&per_page=12&key=${this.key}`;\r\n    return fetch(this.baseUrl + requestParam).then(responce => responce.json());\r\n  },\r\n};\r\n","import apiService from './api';\r\nconst refs = {\r\n  searchForm: document.querySelector('#searchForm'),\r\n  articleList: document.querySelector('.gallery'),\r\n  loadMore: document.querySelector('button[date-action=\"load-more\"]'),\r\n\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\r\nrefs.loadMore.addEventListener('click',loadMore);\r\nrefs.loadMore.addEventListener('click',scroll);\r\nwindow.addEventListener('scroll',infScrol);\r\nfunction loadMore (e){\r\n    apiService.buttomPosition=refs.articleList.getBoundingClientRect().bottom\r\n    apiService.pageNumber+=1;\r\n    apiService.fetchImages().then(data => {\r\n        const markup = getTamplite(data.hits);\r\n        refs.articleList.insertAdjacentHTML('beforeend', markup);\r\n      })\r\n      \r\n}\r\nfunction infScrol() {\r\nif (document.documentElement.getBoundingClientRect().bottom < document.documentElement.clientHeight+10){\r\n    loadMore()\r\n}else return\r\n}\r\nfunction scroll (){\r\n    window.scrollTo({\r\n        top:apiService.buttomPosition,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n}\r\nfunction searchFormSubmitHandler(e) {\r\n  e.preventDefault();\r\n  apiService.pageNumber=1;\r\n  apiService.query = e.currentTarget.elements.query.value;\r\n  apiService.fetchImages().then(data => {\r\n    const markup = getTamplite(data.hits);\r\n    refs.articleList.innerHTML = markup;\r\n  });\r\n}\r\nfunction getTamplite(data) {\r\n  return data.reduce((acc, foto) => {\r\n    return (acc += `<li class=\"photo-card\">\r\n<img src=${foto.webformatURL} alt=\"\" data-bigfoto=${foto.largeImageURL} />\r\n<div class=\"stats\">\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">thumb_up</i>\r\n    ${foto.likes}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">visibility</i>\r\n    ${foto.views}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">comment</i>\r\n    ${foto.comments}\r\n  </p>\r\n  <p class=\"stats-item\">\r\n    <i class=\"material-icons\">cloud_download</i>\r\n   ${foto.downloads}\r\n  </p>\r\n</div>\r\n</li>`);\r\n  }, '');\r\n}"],"sourceRoot":""}